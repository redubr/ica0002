apiVersion: 1

datasources:
  - name: Prometheus
    type: prometheus
    url: http://{{hostvars[inventory_hostname]['ansible_default_ipv4']['address']}}:{{prom_port}}/prometheus
    basicAuth: false
    editable: true

  - name: influx-latency
    type: influxdb
    url: http://{{hostvars[inventory_hostname]['ansible_default_ipv4']['address']}}:8086
    access: proxy
    basicAuth: false
    database: latency

  - name: influx-telegraf
    type: influxdb
    url: http://{{hostvars[inventory_hostname]['ansible_default_ipv4']['address']}}:8086
    access: proxy
    basicAuth: false
    database: telegraf
    jsonData:
          httpMode: POST